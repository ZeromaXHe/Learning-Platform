### Java

继承，接口，抽象类区别？

看过源码吗？String源码知道吗？（答：String类是final char[]数组实现的，注意这个是java8的时候，java9变成了byte[]）

因为上一个问题，面试官问我知道java9的时候有什么变化吗？（答：不知道。我还真没注意过java9改了String 类的实现）

平时用jdk哪个版本？（答： 8）

反射的原理

 Java里的Map有哪几种实现(HashMap | TreeMap | HashTable | LinkedHashMap | ConcurrentHashMap)

TreeMap的使用场景，底层数据结构，红黑树的存取复杂度

LinkedHashMap的使用场景 (用LinkedHashMap实现lru，按插入顺序(默认) accessOrder = false | 按访问顺序 accessOrder = true，HashMap+双向链表)

Java中常用的集合类 (先说Collection和Map接口，再分别说子接口和实现类，以及大概的区别，没让细讲源码)

有一组数据，需要按照顺序对它进行加密，如果用集合做的话你会选哪个集合？比如一个数组，其元素本身无序，每个元素是字母或者数字都行，对它从小到大进行排序，你会选哪个集合去存储？  (我当时好像选的TreeMap？忘记了...)

面向对象和面向过程的区别 

接口和抽象类的区别 

多态的分类 

异常体系 

finally 的作用 

如果在 finally 块中有 return 语句，发生异常会执行吗？不发生呢？ 

ArrayList 的扩容过程 

非线程安全的集合怎么改为线程安全

Java集合类八股

ArrayList和LinkedList区别

HashMap八股（数据结构，扩容，链表和红黑树转换）

有哪些线程安全的集合类，讲一讲原理（HashTable，ConcurrentHashMap，CopyOnWriteArrayList）

HashMap 多线程下，怎么个个不安全法，数据丢失问题

八种基本类型

int取值范围

封装类

封装类与封装类，封装类与基本类型比较。

注意Integer在[-128,127]和这个区间之外是有区别的。在这个区间之内，Integer类型是IntegerCache.cache[x],这是一个静态类，所以可是使用==，在这个范围之外是Integer类型是直接new Integer(x)

jdk1.8之后的lamnda表达式会不会写？我不会写，我只在python里写过lamnda。

hashmap counrrenthashmap 要求从源码上解释。如果两个同样的put相同的key，会发生什么？

HashMap和HashTable区别

HashTable如何实现线程安全（给每个方法加synchronized，put时只能有一个线程获取到锁）

HashMap底层数据结构是什么

HashMap先不考虑红黑树，手写一个底层数据结构，存储key value

==和equals的区别

一个类的两个对象怎么进行比较

既然说到hashcode，有没有可能两个对象equals但是hashcode不同
如果出现了上述这种情况，有可能发生什么情况

hashmap怎么解决hash冲突
除了链地址法还有其他的解决hash冲突的方法吗（开放定址和再哈希）

如果hashmap溢出了怎么办（建立公共溢出区？）
.公共溢出区也满了怎么办？（啊…？这我真的盲区了，我说hashmap也会扩容吧…？）

说一下hashmap扩容的过程？

### 多线程

volatile的理解

Java中有个volatile关键字用过吗，用volatile修饰的变量来记录访问次数，需要其他同步操作吗 (场景：单例模式等，参考《深入理解Java虚拟机》第12章12.3.3“对于volatile型变量的特殊规则”，从Java内存模型JMM的角度讲volatile，说明指令中的lock前缀和将esp寄存器的值+0这个空操作)

Java有哪些同步方案，如果不加锁呢，加锁会不会太重了  (参考《深入理解Java虚拟机》第13章第2节，从“阻塞同步方案 | 非阻塞同步方案 | 无同步方案”三部分说明，面试官提到加锁会不会太重的时候，我提了一下synchronized锁升级)

CAS的ABA问题是什么，要怎么解决 (参考《深入理解Java虚拟机》P477)

 Java中线程同步的方案有哪些 (参考《深入理解Java虚拟机》第13章第2节，从“阻塞同步方案 | 非阻塞同步方案 | 无同步方案”三部分说明)

Lock接口的实现类  (参考《Java并发编程的艺术》第5章，Lock接口的实现基本都是通过聚合了一个同步器的子类来完成线程访问控制的，引出了队列同步器AQS，实现类讲了ReentrantLock和ReentrantReadWriteLock)

volatile关键字的作用（引出Java内存模型，保证可见性，防止指令重排序）

从可重入锁出发， 要求写出基于可重入锁的阻塞队列，怎么实现

从volatile出发， 要求写出volatile解决可见性的代码

 多进程与多线程 项目里用到多线程了吗？

线程池工作原理

为什么要使用线程池

工作队列

线程池运行中，突然电脑关机了，内存数据都会丢失，开机后怎么办？
*我开始说了写备份到内存，其实就是持久化，但是这个不行，不可能时时刻刻写。*
*然后我就突然灵光乍现想起redis里的AOF，我就说记录任务队列，开机后回滚重新再执行一次就好了。面试官指导说我这个有点对，说是消息队列的一些框架的内容，分布式队列，但我消息队列我只知道是个什么东西，其他一无所知。*

sychronized介绍一下

其他线程如何知道已经有线程在put（Mark word）

Mark word是什么

synchronized的锁优化

Java 线程的状态；time-waiting时间到了，进入什么；调用sleep()进入什么状态？time_waiting，那这个time_waiting状态会释放锁吗？不会；锁等待是什么状态？blocked

wait() notify() 以及线程状态转换 

Java线程状态和操作系统线程有什么不同？Java线程的 runable=ready+running，操作系统线程分为 running和 ready，并不是合在一起的 

为什么Java把这两个状态放在一起？

用过多线程吗，怎么实现的多线程？（答了自己用线程池，还可以用其他三种方法创建新线程）

那线程池的线程具体在什么时候创建一个线程或者销毁一个线程？

你能手动实现一个死锁的情况吗

有ABC三个线程，怎么编程让B在C前面执行，A在B前面执行（之前看过这题，说了思路被diss太麻烦但是逻辑可行）

锁都有哪些，区别

线程的几种状态 

线程池的状态 

线程池的运行过程 

如何合理地配置线程池

怎么实现阻塞队列 

怎么监控线程池的运行状态，答的用一些线程监控的工具，面试官说指代码层面上，只争对线程池，没答上

java中有几种锁

锁升级的过程（自旋的缺点，CAS有什么不足）

对象头的结构

synchronized和ReentrantLock区别

ReentrantLock是怎么实现的，讲到AQS，顺便说了AQS

还有哪些基于AQS的同步工具

volatile作用
volatile怎么保证可见性和防止指令重排序

说说threadlocal怎么实现的

threadlocalmap中key为啥要用弱引用，key被gc后value怎么办

如何保证线程安全

线程池+拒绝策略

synchronzied的对象锁和类锁的区别

### Spring

AOP的应用与底层

aop ioc介绍一下？

怎么实现 IOC 的

怎么管理 Bean 的

怎么解决循环依赖的情况

spring ioc aop

注解底层怎么实现的（动态代理）

注解失效有哪些原因（自己还经历过@Transaction失效的bug的，当时没答上来，被自己气死）

bean的加载过程

spring事务传播机制

spring如何解决循环依赖

aop动态代理，jdk动态代理 源码 看过吗

### Spring Cloud

Spring Gateway路由的应用详情

核心组件有哪些以及对应的功能

### Dubbo

Dubbo有了解过吗？讲一下（讲了Dubbo的10层架构，服务注册和服务发现的流程，consumer和provider之间通信）

怎么学习Dubbo的？看过源码吗？（主要看视频和博客，没看过源码）

Dubbo用了哪些设计模式（没看过源码，就讲了下代理模式）

### 数据库

数据库的隔离级别

读已提交，可重复读是什么意思

数据库默认隔离级别

讲一下事务

如果你发现查询很慢怎么办？（答：explain）

关系型数据库和非关系型数据库

数据库的引擎

数据库的锁

数据库的隔离状态

怎么防止幻读

数据库B+树

数据库两种引擎，索引结构

复合索引最左匹配，以及从源码上讲为什么要最左匹配

数据库的范式？【三大范式】

数据库事务，ACID，mvcc

项目中的数据库是怎么设计的？索引是怎么设计的？为什么这么设计？有没有什么缺陷？怎么优化查询的？假设有一个班级，班级里有老师、学生，有语数外等几门课程刚考完试出了成绩，你该如何设计这张表？

### MySQL

MySQL索引的理解（主键索引和二级索引）

MySQL索引

讲一下Mysql索引（说了innodb myisam区别）

sql两种引擎区别

聚簇索性和非聚簇索性

事务隔离级别

MySQL查询比较慢的话，通过什么方式来优化
(情况①：偶尔很慢，可能是数据库在查询脏页，或者没拿到锁
情况②：一直很慢，可能是没有索引，或者有索引但没走索引，或者表数据量太大需要分库分表)

怎么实现的可重复读  (主要从锁机制+MVCC的角度讲，详细说明了当前要访问的版本的事务id和ReadView中活跃事务id列表的关系，如果大于最大值怎么样，小于最小值怎么样，介于最大值最小值之间要怎么办)

mysql用过吗？讲一下b+树

redis和mysql一致性解决方案（答到一半面试官打断了，说写两道题，感觉挺不尊重人的）

从联合索引出发，要求画出联合索引B+树索引图。 

从mysql事务出发，要求画出RC和RR隔离级别下的MVCC。 

从mysql update语句出发， 要求说出binlog 与 redolog一致性问题。

如果使用delete删除，是真的把这个记录删除了吗？
*我没答出来。这个考的其实是mysql三种事务日志类型，redo log(重做日志)和binlog(归档日志)，回滚日志（undo log）。其中undo log保存了事务发生之前的数据的一个版本，可以用于回滚，同时可以提供多版本并发控制下的读（MVCC），也即非锁定读。所以使用undo log可以回滚。*

自增id为什么会用完，用完了怎么办？
*因为删除操作不会改变自增id，自增id会一直增长，如果频繁删除和新增，那很快就会到达限制*
*用完了的话就只能更新，不能新增。这个我真不知道，我心里嘀咕是不是类似uid那样新造个类型的字符串id出来，但我没说。*

如果数据库有100条值，数据库引擎会使用索引搜索吗？
*因为innodb数据库引擎有个机制是，会对sql语句优化后会判断是用索引查找还是全盘扫描比较快，如果数据库殷勤认为全盘扫描更快就会使用全盘扫描，但100算不算少我就不知道了。反正我是这么说的*

like语句什么时候能用什么时候不能用？
*第一个就是%，那么会和通配符在一起导致%失效。还有就是text很长时也不行。当然这个我没答上来。*

 InnoDB优点

  MyISAM索引底层是什么结构 

 B树和B+树区别 

为什么选择B+树不选择B树 

MySQL如何支持事务 

undo log如何保证原子性 

MySQL隔离级别、存在的问题 

MySQL如何解决脏读、不可重复读、幻读 

如何解决脏读？（读已提交）MySQL如何判断事务有没有提交？事务A中对id=1进行修改，不提交；事务B中读取id=1的数据，如何判断这个数据有没有被提交？ 

InnoDB可重复读是否存在幻读问题 

如果对记录修改，是否会读到修改的值？

MySQL有哪些索引

为什么会有覆盖索引

table 有a b c d四列，(b c d) 联合索引，selct c,d from table where c = 1会使用这个联合索引吗？不会，最左匹配

为什么覆盖索引存在最左匹配原则 

select c,d from table where b = 1 and d = 2会走索引吗？我：行。面试官：这个可以行，也可以不行…分情况，MySQL中有一些优化，比如ICP，就会将索引下推（我没懂…）

给字段加索引最好怎么加？

什么情况下使用复合索引更好？

什么情况下会导致索引失效？

为什么使用模糊匹配会失效，你能给我解释一下底层原理吗？

MyISAM 和 InnoDB 比较；

mysql都有哪些索引类型；为什么b+树，[红黑树](https://www.nowcoder.com/jump/super-jump/word?word=红黑树)、b树为什么不好；

mysql的主键，唯一索引区别，怎么建索引；

一条sql怎么优化？

mysql怎么实现主从复制？ 【binlog】

mysql的隔离级别

事务acid
mysql如何保证acid

redo log和undo log区别

redo log和undo log是如何生成的（这块细节忘了，只说了先写内存，然后再刷盘）

mysql默认隔离级别 

如何实现可重复读 

如何解决幻读 

间隙锁和nextkey锁 

mysql锁是锁的什么（索引） 

mysql的索引结构，有什么优点 

怎么实现读写分离 

主从复制是怎么实现同步的，答传bin log文件，后续数据更新怎么同步，答mysql不了解，但我知道redis主从复制后续是通过一个复制缓存区来记录新增的命令，通过发送这些命令实现同步

Mysql索引优缺点， B+树

隔离级别

MVCC 乐观锁/悲观锁

MySQL索引类型

主键索引和二级索引的区别

### Redis

Redis解决缓存穿透

缓存穿透的解决方案

布隆过滤器

一致性哈希算法

Redis 的数据结构有哪些？使用场景？（尬住了，只知道 sorted set 的场景）

redis数据结构（5个基础数据结构和3个高级数据结构）

redis过期键删除策略（定期删除、惰性删除、定时删除）

缓存穿透， 缓存击穿， 缓存雪崩基本概念及解决方案。

redis哨兵集群相关问题（怎么主从同步，怎么哨兵选举， 怎么master选举）

 redis持久化机制

redis的基础数据类型，以及他们如何实现

redis缓存问题-雪崩，击穿

redis数据一致性问题，如何解决？

说说redis架构（单线程，io多路复用）

redis的底层数据结构知道吗（只知道用到了跳表，然后说了下跳表）

缓存穿透和缓存雪崩，解决方法

缓存和数据库怎么保证一致性

项目 中用到了redis的什么结构

redis的跳表的实现

Redis为什么能承载高并发

Redis分布式锁实现

### RabbitMQ

RabbitMQ的原理

mq的作用（异步、削峰、解耦）

说说rabittmq架构（说了分为虚拟机、交换机和队列，然后说了下消息的传递过程，面试官否认了，说这只是应用层面）

### Kafka

kafka副本了解吗，讲一下

为什么不让一个partition被同组的多个consumer消费

### 注册中心

关于Nacos与ZK的区别，为什么选择Nacos

ZK在项目中的应用

### ElasticSearch

ES底层

### 分布式

分布式锁的实现（ZK、Redis）

乐观锁和悲观锁

从银行转账出发， 要求描述出两阶段提交基于（RocketMQ）

### JVM

说说jvm？（说了内存区域和垃圾回收）

垃圾回收算法，jvm运行时区域等

Java中有个String类，如果我们自己写一个java.lang.String类，会出现问题吗 (参考《深入理解Java虚拟机》第7章 虚拟机类加载机制，主要讲了类加载器的种类和双亲委派模型)

有没有用过工具，怎么查看Java堆的统计信息 (参考《深入理解Java虚拟机》第4章，没用过工具，只说了常用了JVM参数)

四种引用

场景题：如果是一个服务器用于存储数据，然后里面有一些数据是热点数组，需要缓存，用哪种引用

JVM内存空间分布

垃圾回收算法（标记-清除，标记-复制，标记-整理）

哪些可以作为GCROOT（这里太久没看了，没答全）

常见的垃圾回收器

讲一讲CMS的回收过程

mesi协议（缓存一致性协议）

内存屏障

JVM内存结构

堆如何分代

为什么要分代

回收算法

回收算法有哪些具体实现？垃圾回收器

你对jvm有了解吗？说一下jvm的内存分区？
堆里面怎么分区的？（这题真不会，只说知道为了方便垃圾回收所以分了新生代区和老年代区，其他的真不知道）

那你知道一个对象怎么从新生代变成老年代吗？（懵逼，对不起，不知道，只简单的知道两个区的定义）

jvm内存模型，如何分配内存

垃圾回收算法

类加载机制

jvm的内存模型

对象什么情况会进去老年代

说说四种引用

### Netty

Netty 的线程模型

### 数据结构

如果要实现LRU算法，应该选择哪种数据结构？LRU算法要淘汰页面，就需要断链操作，而链表只能顺序查找，时间复杂度是O(n)，怎么能更快实现淘汰

拓扑排序

最小栈怎么实现

N叉树每层求最大值

Rand7生成rand10和链表删除重复元素

跳表的原理和插入过程

假设有1,2,3,4,5,6,7,8,9,10 在B+树中存储，是什么样子

 LRU 如何实现？在哪用过

LRU put get 时复

问一下数据结构，你了解哪些二叉树的种类和他们的具体使用场景（已经有点崩溃了，说了搜索和完全，其他就想不起来了，所以面试官开始引导我）

AVL树了解吗（宕机了，想不起来应用场景了，就说不太记得了）

红黑树了解吗（简单说了一下） 

红黑树的具体应用场景，举个例子（说了hashmap和1.8的concurrent hashmap） 

为什么用红黑树不一直用链表 

为什么用红黑树不用普通二叉树（说了普通二叉树会导致一侧树的深度太深）

普通二叉树深度太深会导致什么？（…）

B树和B+树知道吗？区别是什么？

B树和B+树的应用场景说一下（mysql的索引）

### 操作系统

操作系统内存管理

逻辑地址和物理地址的转化

虚拟内存

页式管理和段式管理

进程通信的方式，匿名管道，命名管道如何生成，信号怎么生成，头文件？

用户态和内核态

linux 执行二进制文件过程。。。【三面考的，我当场就裂开了】

linux 创建进程啥的【也裂开】

内核，用户态，内核态，怎么切换

进程线程协程

进程通信方式，哪种最高效

进程同步方式

谈谈虚拟内存【听到谈谈就麻】

### Linux

硬链接和软连接

常用的Linux指令

### 网络编程

I/O多路复用机制 select与epoll的区别

多路io复用

5种io， select epoll区别，select数组为什么默认1024 ？

### 计算机网络

在浏览器中输⼊url地址 ->>会发生什么过程？（答：这个最最最常见的问题我居然忘了！忘了！这里就说的不好）

DNS的过程

http的缓存机制

http状态码

tcp怎么保证可靠性

tcp的拥塞控制

http1.0 1.1 1.2区别

HTTP请求的过程，keep-alive

https加密过程，为什么不是非对称加密

DNS过程，问的很细

http状态码，502,504？

http2.0 了解3.0吗

http报文格式

Get post还有什么方式

登录的时候用什么保存状态 session和cookie

我们来问问网络吧，DNS是哪层的协议

tcp有个状态是Time_Wait，这个具体是在哪儿，作用是什么

get和post的区别，用get和post传输的时候有个编码，那个编码的作用是什么(一开始没听懂问题，说的是Accept-Encoding，后来面试官说是想问http请求中特殊字符的转义)

http协议
(http是哪一层的协议，其传输层协议是什么，三次握手和四次挥手的完整过程)

三次握手和四次挥手的过程

UDP和TCP的区别

UDP为什么是面向报文的

TCP的三次握手协议

 TCP三次握手

TCP 四次挥手

为什么建立三次、断开是四次

四次挥手套接字的状态转移

输入url的流程

http的request、response的具体格式

网络协议有了解吗，为什么Tcp是三次握手四次挥手不是四四或者三三？ 

平时做项目用http还是https? 

SSL套接字的过程？

SSL在历史上有一次心脏流血漏洞，这个漏洞怎么出现的？

谈一谈http，https  

tcp怎么实现可靠传输，udp可以可靠传输吗？

smtp，ftp了解吗【我都没看过，三面考的】

tcp拥塞控制，滑动窗口

tcp的sync攻击，为什么三次握手

tcp listen backlog【当时一脸懵，三面考的】

OSI七层协议

输入URL 到页面加载过程

说说tcp协议

tcp如何保证不会接受重复的报文

tcp如何保证有序

tcp四次挥手，time waiting

客户端 和一台服务器能建立多少连接，怎么做拥塞控制和进程间通信？

### 计算机组成

处理中断，恢复中断

固态硬盘和机械硬盘区别

### 编译原理

程序编译的过程

### 设计模式

解释一下开闭原则

里氏替换解释一下

单一原则讲一下吧

说几种熟悉的设计模式？

工厂模式的设计思路，优缺点

从设计模式出发， 要求写出装饰者模式和策略模式代码

那我们来聊聊单例模式（？？？？？？），单例模式有几种实现方式？（这里有一个地方说错了，说成饿汉是编译时期生成了）
你再想想，是编译时期吗？我问下你，你写的代码如何运行，这个过程你说一下（对不起！！！！）
为什么双重校验，一次校验不行吗（这题我会！）
那怎么用一次校验实现线程安全？（我忘了orz开始胡言乱语，没有自信的问静态内部类可以吗）
静态内部类效率也不太好，你能有什么优化方法吗（对不起！！！我真的没用过我不会！！！）

谈谈使用过的几种设计模式，以及优缺点【真的太高频了，我每次都被考】

### 网络安全

再来问问网络安全吧，Sql注入…

### 应用设计

订单延时取消实现

你的项目里存了多少数据？如果让你存1亿条数据你怎么办？（答：分库分表）

分库分表会遇到什么问题？怎么解决？（答：分布式id问题 用redis，雪花算法解决）

设计rpc框架考虑什么

检查手机号是否存在于百万数据电话号中

10w的阶乘怎么算

100G文件，每行是一个长整数，总行数为N
主机内存1G
结果：输出最大的K个数 （K << N）
这道题千万别被100G迷惑，想着分文件之类的… 
 维护大小为k的最小堆，如果当前元素大于堆顶元素，入堆。这样，堆中始终存储的是到当前为止，最大的k个数。 
 大小为k的最小堆会一直存在内存中，因为K << N，所以不考虑内存不够的情况

比如估算一下北京有多少个ipad