# 第1章 分布式系统的特征

## 1.1 简介

我们定义的分布式系统有如下显著特征：

**并发**：在一个计算机网络中，执行并发程序是常见的行为。用户可以在各自的计算机上工作，在必要时共享诸如Web页面或文件之类的资源。系统处理共享资源的能力会随着网络资源（例如，计算机）的增加而提高。在本书的许多地方将描述有效部署这种额外能力的方法。对共享资源的并发执行程序的协调也是一个重要和重复提及的主题。

**缺乏全局时钟**：在程序需要协作时，它们通过交换消息来协调它们的动作。密切的协作通常取决于对程序动作发生的时间的共识。但是，事实证明，网络上的计算机与时钟同步所达到的准确性是有限的，即没有一个正确时间的全局概念。这是通信仅仅是通过网络发送消息这个事实带来的直接结果。定时问题和它们的解决方案将在第14章描述。

**故障独立性**：所有的计算机系统都可能出故障，一般由系统设计者负责为可能的故障设计结果。分布式系统可能以新的方式出现故障。网络故障导致网上互连的计算机的隔离，但这并不意味着它们停止运行，事实上，计算机上的程序不能够检测到网络是出现故障还是网络运行得比通常慢。类似的，计算机的故障或系统中程序的异常终止（崩溃），并不能马上使与它通信的其他组件了解。系统的每个组件会单独地出现故障，而其他组件还在运行。分布式系统的这个特征所带来的后果将是贯穿本书的一个反复提及的主题。

## 1.2 分布式系统的例子

### 1.2.1 Web搜索

Google，Web搜索技术上的市场领导者，在支持用于搜索（与其他Google应用和服务，如Google Earth）的复杂的分布式系统基础设施的设计上已做出了巨大的努力。它代表了计算历史上最大和最复杂的分布式系统设施之一。该基础设施最突出的亮点包括：

- 一个底层物理设施，它由超大数目的位于全世界多个数据中心的联网计算机组成；
- 一个分布式文件系统，支持超大文件，并根据搜索和其他Google应用的使用方式（特别是在文件中以快速而持久的速度读取）进行了深度优化；
- 一个相关的结构化分布式存储系统，它提供对超大数据集的快速访问；
- 一个锁服务，它提供诸如分布式加锁和协定等分布式系统功能；
- 一个编程模式，它支持对底层物理基础设施上的超大并行和分布式计算的管理。

### 1.2.2 大型多人在线游戏

针对大型多人在线游戏，提出了许多解决方案：

- 可能有点出人意料，最大的在线游戏EVE Online，采用了客户-服务器体系架构，在一个集中式服务器上维护了游戏世界状态的单个拷贝，供运行在玩家终端或其他设备上的客户程序访问。为了支持大量客户，服务器自身是一个复杂的实体，拥有由上百个计算机结点组成的集群结构（该客户-服务器方法在1.4节详细讨论，集群方法将在1.3.4节讨论）。
- 其他MMOG采用更多的分布式体系结构，宇宙被划分到大量（可能是超多）服务器上，这些服务器可能地理上分散部署。接着，用户基于当前的使用模式和到服务器的网络延迟（例如基于地理最近）被动态地分配到一个特定服务器。这种体系结构风格被EverQuest采用，它通过增加新的服务器，可自然地扩展。
- 大多数商业系统采用上述两个模型中的一个，但研究者现在也在寻找更极端的体系结构，即不基于客户-服务器原理而是基于对等技术采用完全分散的方法。采用对等技术，意味着每个参与者贡献（存储和处理）资源来容纳游戏。对对等解决方案的进一步研究将推迟到第2章和第10章。

### 1.2.3 金融交易

